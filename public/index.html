<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Welcome to Firebase Hosting</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="message">
      <h1>Welcome to Samuel Henry Hosting</h1>
      <p>Please upload a file to the server and get a link</p>
      </div>
      <progress value="0"  max="100" id="uploader">0%</progress>

      <input type="file" value="upload" id="fileButton" />
      <ul>
      </ul>

<script src="https://www.gstatic.com/firebasejs/3.2.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBmGmz_qhSPOXcbXoRJLXUjZqffAB5sKpU",
    authDomain: "friendlychat-6e622.firebaseapp.com",
    databaseURL: "https://friendlychat-6e622.firebaseio.com",
    storageBucket: "friendlychat-6e622.appspot.com",
  };
  firebase.initializeApp(config);
  // Create the file metadata
  var metadata = {
    contentType: 'image/jpeg'
  };
  //Get elements
  var uploader = document.getElementById('uploader');
  var fileButton = document.getElementById('fileButton');

  // Listen for file selection
  fileButton.addEventListener('change', function(e) {
    //get file
    var file = e.target.files[0];
    //create a storage ref
    var storageRef = firebase.storage().ref('amazing_photos/' + file.name);

    //upload file
    var task = storageRef.put(file);

    //upload progress bar
    task.on('state_changed',

      function progress(snapshot){
        var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
        uploader.value = percentage;

      },

      function error(err){

      },

      function complete(){

      }
    );
  });

</script>

  </body>
</html>
